<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Bongos — Product Info & Rewards</title>
  <style>
    :root{
      --brand:#0f9d58;
      --ink:#0b1220; --muted:#5b6471; --bg:#ffffff; --panel:#f6f8fa; --warn:#fff3cd; --warn-border:#ffe08a;
      --radius:14px;
    }
    *{box-sizing:border-box}
    body{margin:0;font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;color:var(--ink);background:var(--bg)}
    .wrap{max-width:880px;margin:0 auto;padding:20px}
    header{display:flex;align-items:center;gap:12px;margin:8px 0 18px}
    header img{height:44px}
    .card{background:var(--panel);border-radius:var(--radius);padding:16px 18px;margin:14px 0;border:1px solid #e6e8eb}
    h1{font-size:22px;margin:6px 0 10px}
    h2{font-size:18px;margin:10px 0 6px}
    h3{font-size:16px;margin:14px 0 8px}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .row{display:flex;gap:10px;flex-wrap:wrap}
    .pill{background:#e8f5ee;border:1px solid #cfe9dd;border-radius:999px;padding:6px 10px;font-size:13px}
    .muted{color:var(--muted)}
    .btn{display:inline-block;background:var(--brand);color:#fff;text-decoration:none;border:none;border-radius:12px;padding:12px 16px;font-weight:700;cursor:pointer}
    .btn.secondary{background:#1f2937}
    .cta{display:flex;gap:10px;flex-wrap:wrap}
    .warn{background:var(--warn);border:1px solid var(--warn-border);border-radius:12px;padding:12px}
    footer{margin:28px 0 18px;color:var(--muted);font-size:13px}
    .badge{display:inline-flex;align-items:center;gap:6px;padding:4px 8px;border:1px dashed #c9d1d9;border-radius:8px;font-size:13px;background:#fff}
    .u-icon{width:18px;height:18px;display:inline-block;background:#000;color:#fff;border-radius:4px;font:700 12px/18px system-ui;text-align:center}
    .gate{position:fixed;inset:0;background:rgba(11,18,32,.85);display:flex;align-items:center;justify-content:center;z-index:99}
    .gate .panel{background:#fff;max-width:520px;width:92%;border-radius:16px;padding:20px;border:1px solid #e6e8eb;text-align:center}
    .msg{background:#fff8e1;border:1px solid #ffe08a;padding:12px;border-radius:10px;margin-top:8px;display:none}
    .err{background:#fdecea;border:1px solid #f5c2c7;color:#842029;display:none}
    .ok{background:#e8f5ee;border:1px solid #cfe9dd;display:none}
  </style>
</head>
<body>

<div id="ageGate" class="gate">
  <div class="panel">
    <img src="https://raw.githubusercontent.com/Bongosrewards/bongos-rewards/main/Bongos%20Logo%20Final.png" alt="Bongos" style="height:52px;margin-bottom:6px" />
    <h1>Are you 21 or older?</h1>
    <div class="row" style="justify-content:center;margin-top:10px">
      <button class="btn" onclick="allow()">Yes, enter</button>
      <button class="btn secondary" onclick="deny()">No</button>
    </div>
    <p id="gateMsg" class="muted" style="margin-top:12px"></p>
  </div>
</div>

<div class="wrap">
  <header>
    <img src="https://raw.githubusercontent.com/Bongosrewards/bongos-rewards/main/Bongos%20Logo%20Final.png" alt="Bongos" />
    <div>
      <div class="pill">RI CCC Product Information</div>
      <div class="muted" id="skuLine">SKU: —</div>
    </div>
  </header>

  <section class="card" id="productCore">
    <h1 id="prodName">Bongos Mixtails — <span id="variant">Loading…</span></h1>
    <div class="msg" id="status">Loading batch details…</div>
    <div class="err" id="statusErr">Couldn’t load from sheet. Must be hosted (GitHub Pages/Netlify).</div>
    <div class="ok" id="statusOk">Loaded from sheet.</div>
  </section>

  <section class="card">
    <h2>Earn Points with Bongos Rewards</h2>
    <p class="muted">Upload your receipt and earn points toward cash-back rewards and event invites.</p>
    <div class="cta">
     <a id="rewardsBtn" class="btn"
   href="https://docs.google.com/forms/d/1hkN3ogyKxFmgsB-5kI8EPFX2OJKdFh2iI-fcS_8Cduk/viewform"
   target="_blank" rel="noopener">
   Earn Points
</a>

    </div>
  </section>

  <footer>
    © <span id="year"></span> Bongos. For adults 21+. Please consume responsibly.
  </footer>
</div>

<script>
  const CONFIG = {
    csvUrl: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRANCJ9YvLtG-RUHj8M7n4DMY9OnYCUVqUHV5aekLKwPST7FZ7MCuLBxH_LzvCF2_Wnng9d6CbRQAeV/pub?gid=0&single=true&output=csv'
  };

  function $(id){return document.getElementById(id);}
  function allow(){ $('ageGate').style.display='none'; }
  function deny(){ $('gateMsg').textContent='Sorry, you must be 21+.'; }
  $('year').textContent = new Date().getFullYear();

  function parseCSV(text){
    const rows=[],row=[],len=text.length;let i=0,f='',q=false;
    while(i<len){const c=text[i];
      if(q){if(c=='"'){if(text[i+1]=='"'){f+='"';i++;}else{q=false;}}else{f+=c;}}
      else{if(c=='"'){q=true;}else if(c==','){row.push(f);f='';}else if(c=='\n'){row.push(f);rows.push(row.slice());row.length=0;f='';}else{f+=c;}}
      i++;
    }
    return rows;
  }

  async function loadData(){
    try{
      const res=await fetch(CONFIG.csvUrl);
      const text=await res.text();
      const data=parseCSV(text);
      const headers=data.shift();
      const idx=name=>headers.findIndex(h=>h.toLowerCase()==name.toLowerCase());
      const val=(row,name)=>row[idx(name)]||'';
      const match=data[0];
      $('variant').textContent=val(match,'variant');
      $('prodName').textContent='Bongos Mixtails — '+val(match,'variant');
      $('rewardsBtn').href=val(match,'form');
      $('status').style.display='none';
      $('statusOk').style.display='block';
    }catch(e){$('status').style.display='none';$('statusErr').style.display='block';}
  }
  loadData();
</script>
<script>
// existing helper:
function $(id){ return document.getElementById(id); }

// UPDATED allow(): remember approval
function allow(){
  try { localStorage.setItem('bongos21', '1'); } catch(e){}
  $('ageGate').style.display = 'none';
}

// deny unchanged
function deny(){
  const msg = document.getElementById('gateMsg');
  if (msg) msg.textContent = 'Sorry, you must be 21+.';
}

// NEW: auto-hide gate if already approved
(function(){
  try {
    if (localStorage.getItem('bongos21') === '1') {
      var gate = document.getElementById('ageGate');
      if (gate) gate.style.display = 'none';
    }
  } catch(e){}
})();
</script>

</body>
</html>

